무중단배포 
# 쉘스크립트
 ![](https://i.imgur.com/QsnQEuF.png)
![](https://i.imgur.com/oSWAyDN.png)

![](https://i.imgur.com/wfpqF6d.png)
mvn 실패 d 드라이브 에서 시작 안했음 쉘 스크립트에 이동 명령어 추가해야함 

> cd /d D:/shlee/safescg/safescg 

위의 파일 이동 명령어 추가


![](https://i.imgur.com/7oZtiDd.png)

또 에러남. 디버깅 위해 아래와 같이 쉘 스크립트 수정 
리눅스에서 경로 변경(cd smartSCG-replay/)하고 시작한다는 걸 빼먹음 
![](https://i.imgur.com/va118DP.png)

또 같은 에러. 
알고보니 bash 명령어와 윈도우 명령어의 차이 때문에 발생 
윈도우 명령어에서 d 드라이브로 이동하려면 
cd /d D:/shlee/safescg/safescg 라고 작성하는 것이 맞지만 bash에서는 안됨 
bash에서는 아래와 같이 작성해야함 
cd D:/shlee/safescg/safescg

![](https://i.imgur.com/PHZ8AeC.png)
일단 여기까지 성공 

![](https://i.imgur.com/47bXYEh.png)
비밀번호 치고 에러 . 

< `scp` 명령어에서 파일 경로를 올바르게 지정하지 않았습니다 >

![](https://i.imgur.com/03nizcW.png)

![](https://i.imgur.com/K0U7TrG.png)

위에서 아래와 같이 변경
![](https://i.imgur.com/2tAkrBY.png)


성공 확인, 문제는 비밀번호를 총 3번 수동으로 입력해줘야 함. 

해결방법 서버에 현 윈도우 ssh 키를 저장. 

```cmd
# 로컬 컴퓨터의 공개키 확인
type %userprofile%\.ssh\id_rsa.pub

(ssh~~~=email) 키 값 출력 

# 서버에 접속 
ssh scgadm@10.20.2.5

비밀번호 입력 

# `authorized_keys` 파일 열기 또는 생성
echo "복사한_공개_키_내용" > .ssh/authorized_keys

# 권한 설정
chmod 600 .ssh/authorized_keys
```

test api 만든후 배포 스크립트 돌려보니 제대로 작동하는 것 확인. 

앞으로는 Power Shell 에서 .\safescg_test_script.sh 만 실행시키면 자동 배포 됨 굳!!!! 

# **Spring이 제공하는 캐시(Cache) 추상화**




# UserRepository Test 

```JAVA
@ExtendWith(SpringExtension.clss) // DataJpaTest에 내장되어 있으므로 생략 가능
@TestPropertySource("classpath:test-application.properties") //기본 설정 되어 있음
@DataJpaTest(showsql=true)
public class UserRepositoryTest{

	@Autowried
	private UserRepository userRepository;
	
	@Test
	void UserRepository_가_제대로_연결되었다(){
		// given
		UserEntity userEntity = new UserEntity();
		userEntity.setEmail("test@naverm.com");
		userEntity.setAddress("Seoul");
		userEntity.setNickname("test");
		userEntity.setStatus(UserStauts.ACTIVE);
		userEntity.setCertificationCode("aaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa");
		
		// when
		UserEntity result = userRepository.save(userEntity);
		
		// then
		assertThat(result.getId()).isNotNull();
	}

	@Test
	void findByIdAndStatus_로_유저_데이터_찾아올_수_있다() {
		// given 
		UserEntity userEntity = new UserEntity();
		userEntity.setId(1L);
		userEntity.setEmail("test@naverm.com");
		userEntity.setAddress("Seoul");
		userEntity.setNickname("test");
		userEntity.setStatus(UserStauts.ACTIVE);
		userEntity.setCertificationCode("aaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa");

		// when 
		userRepository.save(userEntity);
		Optional<UserEntity> result = userRepository.findByIdAndStatus(1,
		UserStatus.ACTIVE);

		// then
		asserThat(result.isPresent()).isTrue();
	}
	
	@Test
	void findByIdAndStatus_는_데이터가_없으면_Optional_empty() {
		// given 
		UserEntity userEntity = new UserEntity();
		userEntity.setId(1L);
		userEntity.setEmail("test@naverm.com");
		userEntity.setAddress("Seoul");
		userEntity.setNickname("test");
		userEntity.setStatus(UserStauts.ACTIVE);
		userEntity.setCertificationCode("aaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa");

		// when 
		userRepository.save(userEntity);
		Optional<UserEntity> result = userRepository.findByIdAndStatus(1,
		UserStatus.ACTIVE);

		// then
		asserThat(result.isEmpty()).isTrue();
	}

	@Test
	void findByEmailAndStatus_로_유저_데이터_찾아올_수_있다() {
		// given 
		UserEntity userEntity = new UserEntity();
		userEntity.setId(1L);
		userEntity.setEmail("test@naverm.com");
		userEntity.setAddress("Seoul");
		userEntity.setNickname("test");
		userEntity.setStatus(UserStauts.ACTIVE);
		userEntity.setCertificationCode("aaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa");

		// when 
		userRepository.save(userEntity);
		Optional<UserEntity> result = userRepository.findByEmailAndStatus(
		"test@naverm.com",UserStatus.ACTIVE);

		// then
		asserThat(result.isPresent()).isTrue();
	}
	
	@Test
	void findByEmailAndStatus_는_데이터가_없으면_Optional_empty() {
		// given 
		UserEntity userEntity = new UserEntity();
		userEntity.setId(1L);
		userEntity.setEmail("test@naverm.com");
		userEntity.setAddress("Seoul");
		userEntity.setNickname("test");
		userEntity.setStatus(UserStauts.ACTIVE);
		userEntity.setCertificationCode("aaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa");

		// when 
		userRepository.save(userEntity);
		Optional<UserEntity> result = userRepository.findByEmailAndStatus(
		"test@naverm.com",UserStatus.ACTIVE);

		// then
		asserThat(result.isEmpty()).isTrue();
	}
}
```

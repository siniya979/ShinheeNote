
# 문자열 계산기 리뷰 

# 로또 

```
구입금액을 입력해 주세요.
14000
14개를 구매했습니다.
[8, 21, 23, 41, 42, 43]
[3, 5, 11, 16, 32, 38]
[7, 11, 16, 35, 36, 44]
[1, 8, 11, 31, 41, 42]
[13, 14, 16, 38, 42, 45]
[7, 11, 30, 40, 42, 43]
[2, 13, 22, 32, 38, 45]
[23, 25, 33, 36, 39, 41]
[1, 3, 5, 14, 22, 45]
[5, 9, 38, 41, 43, 44]
[2, 8, 9, 18, 19, 21]
[13, 14, 18, 21, 23, 35]
[17, 21, 29, 37, 42, 45]
[3, 8, 27, 30, 35, 44]

지난 주 당첨 번호를 입력해 주세요.
1, 2, 3, 4, 5, 6

당첨 통계
---------
3개 일치 (5000원)- 1개
4개 일치 (50000원)- 0개
5개 일치 (1500000원)- 0개
6개 일치 (2000000000원)- 0개
총 수익률은 0.35입니다.(기준이 1이기 때문에 결과적으로 손해라는 의미임)

```

- 로또 자동 생성은 Collections.shuffle() 메소드 활용한다.
- Collections.sort() 메소드를 활용해 정렬 가능하다.

구현 목록 
1. inputUI
2. outputUI

필요한 것 

상수 : LOTTO_TICKET_PRICE = 1000; 
상수 : LOTTO_NUMBER = 6; -> 로또 한 개가 필요한 숫자 
상수 : LOTTO_NUMBER_LIMIT = 45; - 랜덤 숫자 제한 

상수: 1등 금액 , 2등 금액, 3등 금액,  4등 금액 
변수 : 당첨 번호와 매칭되는 개수 
변수 : 리스트, 각 1등 티켓 수, 2등 티켓 수 ... 를 담는다. 

테스트 목록 

1. 금액을 입력하면 구매 가능한 최대 개수의 로또를 구매한다. 
2. 구매 개수 만큼 배열 or 리스트를 생성한다.
3. 생성한 자료구조에 랜덤 클래스 이용하여 임의의 값을 삽입한다. 
4. 담청 번호 입력하면 크기가 6인 자료구조에 담는다. 숫자가 부족하면 Exception 처리 
5. 각 기준별로 몇 개씩 일치하는지 확인 
6. 수익률 확인 ( 수익률이 1이면 본전으로 처리 )



로또티켓 테스트 

- 1-45 사이의 랜덤 숫자를 삽입한다. 
- 파라미터(List)와 비교하여 일치하는 숫자 개수를 리턴한다.


로또 머신 테스트 



클래스 분리 

로또티켓 (로또 하나 ) / 로또스(로또 티켓 뭉치) / 로또 머신 ( 컨트롤러 )


``` java 
class LottoMachineTest {  
  
    List<Integer> winnerNumber = new ArrayList<>();  
    LottoTickets lottoTickets = new LottoTickets();  
    LottoMachine lottoMachine = new LottoMachine(lottoTickets, winnerNumber);  
  
    @Test  
    @DisplayName("당첨번호 리스트를 생성한다.")  
    void test2(){  
        String winnerNumber = "1,10,20,30,40,45";  
        lottoMachine.createWinnerNumberList(winnerNumber);  
        assertThat(lottoMachine.getWinningNumbers().size()).isEqualTo(6);  
        assertThat(lottoMachine.getWinningNumbers().get(5)).isEqualTo(45);  
    }  
  
    @Test  
    @DisplayName("구매 가능한 최대 개수를 리턴한다.")  
    void test3(){  
        lottoMachine.buyLotto(15100);  
        assertThat(lottoTickets.getLottoTickets().size()).isEqualTo(15);  
    }  
  
}
```

```java
public class LottoMachine {  
  
    private static final int LOTTO_TICKET_PRICE = 1000;  
    private static final String COMMA_SEPARATOR = ",";  
    @Getter  
    private LottoTickets lottoTickets;  
    @Getter  
    private List<Integer> winningNumbers = new ArrayList<>();  
  
    public LottoMachine(LottoTickets lottoTickets, List<Integer> winningNumbers) {  
        this.lottoTickets = lottoTickets;  
        this.winningNumbers = winningNumbers;  
    }  
  
    public LottoMachine() {  
    }  
  
    public void buyLotto(int money) {  
        int amount = money / LOTTO_TICKET_PRICE;  
        lottoTickets.createLottoTickets(amount);  
    }  
  
  
    public void createWinnerNumberList(String winnerNumber) {  
        winningNumbers = Arrays.stream(winnerNumber.split(COMMA_SEPARATOR))  
                .map(String::trim)  
                .map(Integer::parseInt)  
                .collect(Collectors.toList());  
    }  
}
```


``` java 
class LottoTicketTest {  
  
    private RandomGenerator generator;  
    private LottoTicket lottoTicket;  
  
  
    @BeforeEach  
    public void setUp(){  
        generator = mock(LottoRandom.class);  
        when(generator.generator()).thenReturn(3);  
        lottoTicket = LottoTicket.of(generator);  
    }  
  
    @Test  
    @DisplayName("임의의 값을 삽입한다.")  
    void test1(){  
        assertThat(lottoTicket.getNumber().size()).isEqualTo(6);  
        assertThat(lottoTicket.getNumber().get(1)).isEqualTo(3);  
    }  
//  
//    @Test  
//    @DisplayName("파라미터(List)와 비교하여 일치하는 숫자 개수 리턴")  
//    void test2(){  
//        List<Integer> drawnNumbers = new ArrayList<>();  
//        drawnNumbers.add(1);  
//        drawnNumbers.add(2);  
//        drawnNumbers.add(15);  
//        drawnNumbers.add(16);  
//        drawnNumbers.add(24);  
//        drawnNumbers.add(6);  
//        when(generator.generator()).thenReturn(3,15,16,24,38,40);  
//        lottoTicket.createLottoNumber();  
//        int result = lottoTicket.countMatchingNumbers(drawnNumbers);  
//        assertThat(result).isEqualTo(3);  
//    }  
  
}
```


```java
class LottoTicketsTest {  
  
    LottoTickets lottoTickets = new LottoTickets();  
  
    @Test  
    @DisplayName("구매 개수 만큼 로또 티켓 리스트를 생성한다.")  
    void test1(){  
  
        int amount = 14;  
        lottoTickets.createLottoTickets(amount);  
        assertThat(lottoTickets.getLottoTickets().size()).isEqualTo(amount);  
  
    }  
  
}
```


```java
public class LottoTickets {  
  
    @Getter  
    private List<LottoTicket> lottoTickets = new ArrayList<>();  
    RandomGenerator generator = new LottoRandom();  
    protected LottoTickets(){}  
  
    private LottoTickets(List<LottoTicket> lottoTickets){  
        this.lottoTickets = lottoTickets;  
    }  
  
    public LottoTickets of(List<LottoTicket> lottoTickets){  
        return new LottoTickets(lottoTickets);  
    }  
  
    public void createLottoTickets(int amount) {  
        for(int i =0; i<amount; i++) {  
            lottoTickets.add(LottoTicket.of(generator));  
        }  
    }  
}
```


```java
public class LottoTicket {  
    @Getter  
    List<Integer> number = new ArrayList<>();  
//    RandomGenerator generator = new LottoRandom();  
  
    private final static int LOTTO_SIZE = 6;  
  
    public LottoTicket(){}  
  
  
    public static LottoTicket of(RandomGenerator generator){  
        LottoTicket lottoTicket = new LottoTicket();  
        lottoTicket.createLottoNumber(generator);  
        return lottoTicket;  
    }  
  
    private void createLottoNumber(RandomGenerator generator) {  
        for(int i = 0; i < LOTTO_SIZE; i++){  
            number.add(generator.generator());  
        }  
    }  
  
    public int countMatchingNumbers(List<Integer> drawnNumbers) {  
        return (int) number.stream().filter(drawnNumbers::contains).count();  
    }  
}
```
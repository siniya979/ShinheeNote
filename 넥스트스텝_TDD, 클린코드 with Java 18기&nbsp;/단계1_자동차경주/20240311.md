 # 리뷰
 금토일 내내 1단계 과제를 하지 않았다. 토요일에 SQLD 시험이 있어 금요일에 하루 종일 벼락치기를 하고 토요일에 시험보고 밀린 집안일과 부족한 수면을 해결했다. 일요일은 본가가서 내리 먹고 자고 놀았다. 그 전에 자동차 경주를 전부 구현해두어서 다행이다. 출근하고 일하는 중에 강사님으로부터 문자 메시지를 받았다. 

![description|center|400](https://i.imgur.com/u1MeVG3.png)

열심히 해보자 했는데 일요일 내내 간단한 커밋조차 안 한 나를 반성하게 됐다. ㅜㅜ 성실히 임하자 내 80만원! 

# 오늘의 커밋 

![](https://i.imgur.com/Od2lLCW.png)

메인 메서드에 작성했던 Input 부분을 따로 클래스로 만들어 분활했다. 

## InputHandler
```java
public class InputHandler {  
    private Scanner scanner;  
    private InputHandler(){  
        this.scanner = new Scanner(System.in);  
    }  
    public static InputHandler of(){  
        return new InputHandler();  
    }  
  
    public String askCarsNames(){  
        System.out.println("경주할 자동차 이름을 입력하세요(이름은 쉼표(,)를 기준으로 구분).");  
        return scanner.nextLine();  
    }  
  
    public int askTrialCount(){  
        System.out.println("시도할 회수는 몇 회 인가요?");  
        while (!scanner.hasNextInt()){  
            scanner.next();  
            System.out.println("다시 입력해주세요. (정수)");  
        }return scanner.nextInt();  
    }  
  
    public void closeScanner() {  
        scanner.close();  
    }  
}
```

처음엔 `RacingGameUI` 에 작성했다가 생각해보니 UI 클래스는 단순 console 에 Print 즉 Output 을 담당하는 클래스이고 내가 분리하고자 하는 건 Input 을 담당하는 로직이라 두 개를 각각 두는 것이 맞다는 판단을 했다. 

```java
InputHandler inputHandler = InputHandler.of();  
  
try{  
    String carNames = inputHandler.askCarsNames();  
    int trialCount = inputHandler.askTrialCount();  
    racingGame.startRacing(carNames, trialCount);  
}finally {  
    inputHandler.closeScanner();  
}
```


메인에서는 try-finally 구문으로 Scanner 객체를 종료시키도록 수정했다. 

![](https://i.imgur.com/iV1hpW0.png)

## 분리 -> 통합으로 

기존 코드는 단순 로직 메서드라도 전부 분리하여 하나의 메서드로 구성하였다. 그러나 사용처가 1곳이고 단순한 로직인 경우 꼭 분리할 필요는 없다고 하셔서 이런 경우는 사용하는 메서드에 통합시켰다. 

![](https://i.imgur.com/HaLQhmJ.png)

isNameDuplicated 는 Cars 에 Car 객체를 추가할 때 이름의 중복을 막기 위해 만들었던 메서드다. 그러나 사용처가 addCar 메서드 한 곳 뿐이라 꼭 분리할 필요가 없다고 하셔서 아래와 같이 addCar에 통합시켰다. 

```java
public void addCar(Car car) throws IllegalAccessException {  
    if(cars.stream()  
            .anyMatch(c -> c.getName().equals(car.getName()))){  
        throw new IllegalAccessException("이미 존재하는 이름입니다.");  
    }  
    cars.add(car);  
}
```


```java
public void updatePosition(int randomNum){  
    if(randomNum >= MOVE_THRESHOLD)  
        position++;  
}
```

isMovable 도 통합

## Try-Catch

기존에 예외처리를 예외 전파 방식으로 했는데 try-Catch로 변경했다. 

```java
private void createCarList(String names) {  
    String[] nameList = Arrays.stream(names.split(COMMA_SEPARATOR))  
            .map(String::trim).toArray(String[]::new);  
    for (String s : nameList) {  
        try {  
            cars.addCar(Car.of(s));  
        } catch (IllegalAccessException e) {  
            throw new RuntimeException(e);  
        }  
    }  
}
```


## 통합테스트 